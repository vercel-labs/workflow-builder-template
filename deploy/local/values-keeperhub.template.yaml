# KeeperHub local deployment values
# Template variables: ${IMAGE_TAG} is replaced by deploy.sh

replicaCount: 1

image:
  repository: keeperhub
  tag: "${IMAGE_TAG}"
  pullPolicy: Never

service:
  enabled: true
  name: keeperhub
  port: 3000
  type: ClusterIP
  containerPort: 3000
  tls:
    enabled: false

ingress:
  enabled: false

deployment:
  enabled: true

serviceAccount:
  create: true
  name: keeperhub

resources:
  limits:
    memory: 2Gi
  requests:
    cpu: 500m
    memory: 512Mi

env:
  NODE_ENV:
    type: kv
    value: "development"
  DATABASE_URL:
    type: kv
    value: "postgresql://local:local@postgresql.local.svc.cluster.local:5432/keeperhub"
  BETTER_AUTH_SECRET:
    type: kv
    value: "local-dev-secret-change-in-production"
  BETTER_AUTH_URL:
    type: kv
    value: "https://workflow.keeperhub.local"
  NEXT_PUBLIC_APP_URL:
    type: kv
    value: "https://workflow.keeperhub.local"
  # AI Configuration - Choose ONE based on your setup:
  # Option 1: Vercel AI Gateway API key
  AI_GATEWAY_API_KEY:
    type: kv
    value: ""
  # Option 2: Direct OpenAI API key
  OPENAI_API_KEY:
    type: kv
    value: ""
  # Option 3: Direct Anthropic API key
  ANTHROPIC_API_KEY:
    type: kv
    value: ""
  # AI_MODEL: Which model to use (default: gpt-4o)
  AI_MODEL:
    type: kv
    value: "gpt-4o"
  # Para Wallet Configuration
  PARA_API_KEY:
    type: kv
    value: "PLACEHOLDER_PARA_API_KEY"
  PARA_ENVIRONMENT:
    type: kv
    value: "beta"
  NEXT_PUBLIC_PARA_API_KEY:
    type: kv
    value: "PLACEHOLDER_PARA_API_KEY"
  NEXT_PUBLIC_PARA_ENVIRONMENT:
    type: kv
    value: "beta"
  # Encryption keys - set via environment variables before deploy
  WALLET_ENCRYPTION_KEY:
    type: kv
    value: "${WALLET_ENCRYPTION_KEY}"
  INTEGRATION_ENCRYPTION_KEY:
    type: kv
    value: "${INTEGRATION_ENCRYPTION_KEY}"
  NEXT_PUBLIC_API_URL:
    type: kv
    value: "https://workflow.keeperhub.local"

livenessProbe:
  initialDelaySeconds: 120
  periodSeconds: 30
  timeoutSeconds: 10
  failureThreshold: 5
  tcpSocket:
    port: 3000

readinessProbe:
  initialDelaySeconds: 60
  periodSeconds: 10
  timeoutSeconds: 10
  failureThreshold: 10
  tcpSocket:
    port: 3000

cronjob:
  enabled: false
